# 僵尸进程和孤儿进程

**僵尸进程：**

子进程退出，但是父进程没有使用wait或waitpid获取子进程的状态信息，那么子进程资源仍然在系统中，这种进程称为僵尸进程。

**孤儿进程：**

父进程结束了，但是子进程还在运行，那么这些进程就称为孤儿进程。孤儿进程会有init进程接管回收。


**僵尸进程的产生**

任何一个子进程(init除外)在exit()之后，并非马上就消失掉，而是留下一个称为僵尸进程的数据结构，等待父进程去处理。如果父进程在子进程exit()之后，没有及时处理，出现僵尸进程。

**危害**

进程号有限，僵尸进程不退出产生越来越多的僵尸进程导致进程号用完，系统就没办法产生新的进程。

**解决**

1. 杀死父进程

    ```
    kill -9 pid
    ``` 
    使得僵尸进程变成孤儿进程有init进程接管回收。

2. 父进程使用wait或waitpid去回收资源
    
    父进程通过wait或waitpid等函数去等待子进程结束，但是不好，会导致父进程一直等待被挂起，相当于一个进程在干活，没有起到多进程的作用。

3. 通过信号机制，在处理函数中调用wait，回收资源

    通过信号机制，子进程退出时向父进程发送SIGCHLD信号，父进程调用signal(SIGCHLD,sig_child)去处理SIGCHLD信号，在信号处理函数sig_child()中调用wait进行处理僵尸进程。什么时候得到子进程信号，什么时候进行信号处理，父进程可以继续干其他活，不用去阻塞等待。