
# TCP流量控制

利用滑动窗口实现流量控制，接收方每次应答都告诉发送方我当前能接收的数据大小（窗口值）。

流量控制就是让发送方发送的速率不要太快，要让接收方能来得及接收。

原理是通过报文中窗口字段来控制发送方的发送速率。

窗口单位：字节

特殊情况：

接收方发送零窗口报文后，接收方又有一些空间，此时接收方发送非零窗口报文给发送方，但是这个报文在传送过程中丢失。这时发送方的窗口大小一直是零导致死锁。

为了解决这个问题， 每个连接都设置了持续计时器，只要连接中的一方收到零窗口报文就启动持续计时器，如果计时到期，就发送一个零窗口的探测报文，而对方在检测该探测报文后会再给出当前的窗口值。如果收到的窗口值还是零就再启动持续计时器。