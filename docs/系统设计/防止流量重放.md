# 防止流量重放

**timestamp**

每次请求带当前时间戳，服务端判断时间戳跟接收到请求时间差超过60s，则认为请求无效。

时间戳和其他参数一起签名
```
sign=md5(uid+token+ts)
```
缺点：60s内也有可能遭到攻击。

**nonce**

每次请求加一个随机数，服务端存储随机数集合，每次收到请求去判断该随机数是否在集合里，再则拒绝访问。

随机数和其他参数一起签名
```
sign=md5(uid+token+nonce)
```
缺点：集合越来越大，查询效率，以及集合丢失问题。


**timestamp + nonce**

```
sign=md5(uid+token+ts+nonce)
```
服务端只存储60s的nonce集合相对比较合理点。