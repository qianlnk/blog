# HTTPS

## 混合加密

HTTPS采用对称加密和非对称加密结合：

- 在通信建立前采用非对称加密的方式来交换**会话密钥**。
- 在通信过程中全部使用**会话密钥**进行对称加密。

采用混合加密的原因：

- 对称加密只有一个密钥，运算速度快，但是密钥必须保密，无法做到安全的密钥交换。
- 非对称加密使用两个密钥:公钥和私钥，公钥可以任意分发而私钥保密，解决了密钥交换问题，但速度慢。


## 摘要算法

摘要算法用来实现完整性，能够为数据生成独一无二的「指纹」，用于校验数据的完整性，解决了篡改 的风险。

![](/uploads/upload_4a2a27918eff40a7387beb2af84dd0fb.png)

客户端在发送明文之前会通过摘要算法算出明文的「指纹」，发送的时候把「指纹 + 明文」一同加密成 密文后，发送给服务器，服务器解密后，用相同的摘要算法算出发送过来的明文，通过比较客户端携带 的「指纹」和当前算出的「指纹」做比较，若「指纹」相同，说明数据是完整的。

## 数字证书

第三方权威机构 CA (数字证书认证机构)，将服务器公钥放在数字证书(由数字证书认证机构颁发)中，只要证书是可信的，公钥就是可信的。

![](/uploads/upload_58868eec5a77dd06fb3280cb5c6b13da.png)


## HTTPS 是如何建立连接的？其间交互了什么？

SSL/TLS协议基本流程：

- 客户端向服务端索要证书并验证服务器的公钥
- 双方协商生产**会话密钥**
- 使用**会话密钥**进行对称加密通信