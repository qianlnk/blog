# redis单线程如何协调各个事件运行？

Redis在新版本中并不是单纯的单线程服务，一些辅助工作会有BIO后台线程来完成，并且Redis底层使用epoll来实现了基于事件驱动的反应堆模式，在整个主线程运行工程中不断协调时间事件和文件事件来完成整个系统的运行。

![](/uploads/upload_bf0640d65fd27713e617dea2e03679f4.png)

Redis处理客户端业务(文件事件)的基本流程：

![](/uploads/upload_d2fa06c421f84450666fa5ebd70f8c0b.png)

由于Redis的是单线程处理业务的，因此IO复用程序将读写事件同步的逐一放入队列中，如果当前队列已经满了，那么只能出一个入一个，但是由于Redis正常情况下处理得很快，不太会出现队列满迟迟无法放任务的情况，但是当执行某些阻塞操作时将导致长时间的阻塞，无法处理新任务。